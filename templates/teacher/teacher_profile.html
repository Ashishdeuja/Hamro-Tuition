{% extends 'base.html' %}
{% load static %}
{% load widget_tweaks %}
{% block page_title %}{{page_title}}{% endblock page_title %}




{% block content %}
<style>
    

.card-profile-image {
width: 100%;
text-align: center;
margin-top: 20px;
}

.card-profile-image img {
width: 150px;
height: 150px;
border-radius: 50%;
object-fit: cover;
}

.card-profile-image a {
display: block;
}

/* Responsive CSS */

@media (max-width: 991px) {
.card-profile-image img {
width: 100px;
height: 100px;
}
}

.image-info{
    width: 25%; 
    float: left; 
    
    
}
.image-content{
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 10px 14px;
        position: relative;
        row-gap: 5px;
        padding: 25px 0;
      }
.card-image{
    position: relative;
    height: 150px;
    width: 150px;
    background: #FFF;
    padding: 3px;
  }
  .card-image .card-img{
    height: 100%;
    width: 100%;
    object-fit: cover;
    border-radius: 50%;
    
  }
@media (max-width: 991px) {
    .image-info {
    width: 100%; / full width for smaller screens /
    float: none; / removes the float */
    }
    }
</style>

<div class="container-fluid">
   <div class="row">
        <div class="image-info">
            <div class="card">
                <div class="image-content">
                    <div class="card-image">
                        <a href="#">
                            <img src="{{ request.user.profile_pic }}"class="card-img" alt="">
                        </a>
                    </div>
                </div>
                <div class="card-body pt-0">
                    <div class="row">
                        <div class="center">
                            <div class="profile-card-subtitle">
                                <div class="text-center">
                                    <h3 class="text-primary">
                                        <b>{{ user.first_name }} {{ user.last_name }}</b>
                                    </h3>
                                    {{ request.user.email }} <br>
                                    +977 {{ request.user.phone_number }}
                                </div>
                            </div>
                        </div>
                    </div>
                </div> 
            </div> 
        </div> 
        <div class="col-xl-8">
            <form method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="card">
                <p>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="form-group focused">
                                    <label class="text-l font-weight-bold text-primary text-uppercase mb-1" for="input-first-name">First Name</label>
                                    {{ form.first_name|add_class:"form-control form-control-alternative" }}
                                    {{ form.first_name.errors }}
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label class="text-l font-weight-bold text-primary text-uppercase mb-1" for="input-last-name">Last Name</label>
                                    {{ form.last_name|add_class:"form-control form-control-alternative" }}
                                    {{ form.last_name.errors }}
                                </div>
                            </div>
                        </div><br>
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label class="text-l font-weight-bold text-primary text-uppercase mb-1" for="input-email">Email Address</label>
                                    <input readonly type="email" id="input-email" class="form-control form-control-alternative"
                                    {{ form.email |add_class:"form-control form-control-alternative"}}
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label class="text-l font-weight-bold text-primary text-uppercase mb-1" for="input-password">Password</label>
                                    <input type="password" id="password" class="form-control form-control-alternative"
                                    {{ form.password|add_class:"form-control form-control-alternative" }}
                                    {{ form.password.errors }}
                                    <div id="password-message"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr class="my-1">
                    <br>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group">
                                <label class="text-l font-weight-bold text-primary text-uppercase mb-1"for="input-address">Address</label>
                                {{ form.address|add_class:"form-control form-control-alternative" }}
                                {{ form.address.errors }}
                            </div>
                        </div>
                    </div><br>
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="form-group">
                                <label class="text-l font-weight-bold text-primary text-uppercase mb-1" for="input-date">Date of Birth</label>
                                {{ form.dob|add_class:"form-control form-control-alternative" }}
                                {{ form.dob.errors }}
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="form-group">
                                <label class="text-l font-weight-bold text-primary text-uppercase mb-1"for="input-age">Age</label>
                                <input readonly type="age"id="input-age"class="form-control form-control-alternative" placeholder="{{ age }}">
                            </div>
                        </div>
                    </div><br>
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="form-group">
                                <label class="text-l font-weight-bold text-primary text-uppercase mb-1"for="input-date">Gender</label>
                                {{ form.gender|add_class:"form-control form-control-alternative" }}
                                {{ form.gender.errors }}
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="form-group">
                                <label class="text-l font-weight-bold text-primary text-uppercase mb-1"for="input-phone_number">Phone Number</label>
                                {{ form.phone_number|add_class:"form-control form-control-alternative" }}
                                {{ form.phone_number.errors }}
                            </div>
                        </div>
                    </div><br>
                    <div class="col-md-12">
                        <div class="form-group">
                            <label class="text-l font-weight-bold text-primary text-uppercase mb-1"for="input-image">Profile Picture</label>
                            {{ form.profile_pic|add_class:"form-control form-control-alternative" }}
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="form-group">
                            <input readonly type="hidden" id="input-salary" class="form-control form-control-alternative"
                            {{ form.salary|add_class:"form-control form-control-alternative" }}
                        </div>
                    </div>
                </div><br>
                <div class="form-group text-center">
                    <button id="update-btn" class="btn btn-primary" type="submit" onclick="return confirm('After a successful profile update:\n\nYour session would be terminated\nYou would be required to login again')">Update Profile</button>
                </div>
            </form><br><br>
        </div>   
    </div>
</div>


 




{% endblock content %}

{% block custom_js %}
  <script>
    const passwordInput = document.querySelector('#password');
    const passwordMessage = document.querySelector('#password-message');

    passwordInput.addEventListener('input', () => {
        const password = passwordInput.value;
        const containsUppercase = /[A-Z]/.test(password);
        const containsLowercase = /[a-z]/.test(password);
        const containsDigit = /\d/.test(password);
        const containsSpecialCharacter = /[-!@#$%^&*()_+|~=`{}\[\]:";'<>?,.\/]/.test(password);
        
        if (password === '') {
        passwordMessage.textContent = '';
        passwordInput.style.borderColor = '';
        } else if (password.length < 8) {
        passwordMessage.textContent = 'Password should be at least 8 characters';
        passwordMessage.style.color = 'red';
        passwordInput.style.borderColor = 'red';
        } else if (!containsUppercase) {
        passwordMessage.textContent = 'Password should contain at least one uppercase letter';
        passwordMessage.style.color = 'red';
        passwordInput.style.borderColor = 'red';
        } else if (!containsLowercase) {
        passwordMessage.textContent = 'Password should contain at least one lowercase letter';
        passwordMessage.style.color = 'red';
        passwordInput.style.borderColor = 'red';
        } else if (!containsDigit) {
        passwordMessage.textContent = 'Password should contain at least one digit';
        passwordMessage.style.color = 'red';
        passwordInput.style.borderColor = 'red';
        } else if (!containsSpecialCharacter) {
        passwordMessage.textContent = 'Password should contain at least one special character';
        passwordMessage.style.color = 'red';
        passwordInput.style.borderColor = 'red';
        } else {
        passwordMessage.textContent = 'Password is valid';
        passwordMessage.style.color = 'green';
        passwordInput.style.borderColor = 'green';
        }
    });
  </script>
    
{% endblock custom_js %}